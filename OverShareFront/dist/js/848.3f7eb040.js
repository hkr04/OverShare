"use strict";(self["webpackChunkvue"]=self["webpackChunkvue"]||[]).push([[848],{21848:function(t,e,i){i.r(e),i.d(e,{default:function(){return f}});var r=function(){var t=this,e=t._self._c;return e("div",{staticStyle:{width:"50%",margin:"5px auto"}},[e("div",{staticClass:"card"},[e("div",{staticStyle:{"font-weight":"bold","font-size":"24px","margin-bottom":"20px","text-align":"center"}},[t._v("编辑会员福利")]),e("el-form",{ref:"formRef",staticStyle:{"padding-right":"50px"},attrs:{model:t.form,"label-width":"100px",rules:t.rules}},[e("el-form-item",{attrs:{label:"标题",prop:"title"}},[e("el-input",{attrs:{placeholder:"标题"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),e("el-form-item",{attrs:{label:"内容",prop:"content"}},[e("div",{attrs:{id:"editor"}})])],1),e("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[e("el-button",{staticStyle:{width:"200px"},attrs:{type:"primary"},on:{click:t.save}},[t._v("保 存")])],1)],1)])},s=[],o=(i(28743),i(5507)),d=i.n(o),a=i(81109),l={name:"ExitMemberWelfare",data(){return{form:{},editor:null,rules:{},user:JSON.parse(localStorage.getItem("xm-user")||"{}"),dbUserId:this.$route.query.userId,dbMemberId:this.$route.query.memberId}},mounted(){this.$request.get("/memberWelfare/selectByMidAndUid/"+this.dbMemberId+"/"+this.dbUserId).then((t=>{this.form=t.data||{},setTimeout((()=>{this.editor.txt.html(this.form.content)}),0)})),this.setRichText()},methods:{handleAdd(){this.form={},this.setRichText()},handleEdit(t){this.form=JSON.parse(JSON.stringify(t)),this.fromVisible=!0,this.setRichText(),setTimeout((()=>{this.editor.txt.html(this.form.content)}),0)},save(){this.$refs.formRef.validate((t=>{t&&(this.form.content=this.editor.txt.html(),this.form.userId=this.dbUserId,this.form.memberId=this.dbMemberId,this.$request({url:this.form.id?"/memberWelfare/update":"/memberWelfare/add",method:this.form.id?"PUT":"POST",data:this.form}).then((t=>{"200"===t.code?(this.$message.success("保存成功"),this.$router.push("/front/Person")):this.$message.error(t.msg)})))}))},setRichText(){this.$nextTick((()=>{this.editor=new(d())("#editor"),this.editor.highlight=a.A,this.editor.config.uploadImgServer=this.$baseUrl+"/files/editor/upload",this.editor.config.uploadFileName="file",this.editor.config.zIndex=0,this.editor.config.uploadImgHeaders={token:this.user.token},this.editor.config.uploadImgParams={type:"img"},this.editor.create()}))}}},h=l,m=i(81656),n=(0,m.A)(h,r,s,!1,null,"33fea343",null),f=n.exports}}]);
//# sourceMappingURL=848.3f7eb040.js.map