{"version":3,"file":"js/841.9af03bbb.js","mappings":"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","sources":["webpack://vue/./src/views/front/SignIn.vue","webpack://vue/src/views/front/SignIn.vue","webpack://vue/./src/views/front/SignIn.vue?b760","webpack://vue/./src/views/front/SignIn.vue?ef06"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"main-content\",staticStyle:{\"width\":\"50%\"}},[_c('div',{staticClass:\"card\",staticStyle:{\"font-weight\":\"bold\",\"font-size\":\"28px\",\"display\":\"flex\"}},[_c('div',{staticStyle:{\"margin-right\":\"80px\"}},[_vm._v(\"现有积分：\"+_vm._s(_vm.newUser.integral))]),_c('div',[_vm._v(\"签到天数：\"+_vm._s(_vm.count))]),_c('div',{staticStyle:{\"flex\":\"1\",\"text-align\":\"right\"}},[_c('el-button',{attrs:{\"size\":\"medium\",\"type\":\"primary\"},on:{\"click\":function($event){return _vm.handleCheckIn()}}},[_vm._v(\"签到\")]),_c('el-button',{attrs:{\"size\":\"medium\",\"type\":\"success\"},on:{\"click\":function($event){_vm.drawer = true}}},[_vm._v(\"充值\")])],1)]),_c('div',{staticClass:\"card\",staticStyle:{\"margin-top\":\"10px\"}},[_c('div',{staticStyle:{\"color\":\"#999999\"}},[_vm._v(\"最近30条记录\")]),_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.tableData}},[_c('el-table-column',{attrs:{\"prop\":\"type\",\"label\":\"方式\",\"width\":\"200\"}}),_c('el-table-column',{attrs:{\"prop\":\"time\",\"label\":\"获取日期\",\"width\":\"200\"}}),_c('el-table-column',{attrs:{\"prop\":\"integral\",\"label\":\"积分变动\",\"width\":\"200\"}})],1)],1),_c('el-drawer',{attrs:{\"title\":\"充值\",\"visible\":_vm.drawer,\"direction\":_vm.direction,\"before-close\":_vm.handleClose},on:{\"update:visible\":function($event){_vm.drawer=$event}}},[_c('el-card',{staticStyle:{\"padding\":\"20px\"},attrs:{\"shadow\":\"never\"}},[_c('div',{staticClass:\"card\"},[_c('el-row',{attrs:{\"gutter\":10}},_vm._l((_vm.items),function(item){return _c('el-col',{key:item,attrs:{\"span\":6}},[_c('div',{staticClass:\"charge-item\",class:{ 'active': _vm.current === item },on:{\"click\":function($event){return _vm.clickItem(item)}}},[_vm._v(\" ￥\"+_vm._s(item)+\" \")])])}),1),_c('div',{staticStyle:{\"margin-top\":\"20px\"}},[_c('el-button',{staticStyle:{\"background-color\":\"#f94b4b\"},attrs:{\"type\":\"primary\",\"size\":\"medium\"},on:{\"click\":function($event){return _vm.handlePay()}}},[_vm._v(\"支 付\")])],1)],1)])],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"main-content\" style=\"width: 50%\">\n    <div class=\"card\" style=\"font-weight: bold;font-size: 28px;display: flex\">\n      <div style=\"margin-right: 80px\">现有积分：{{ newUser.integral }}</div>\n      <div>签到天数：{{ count }}</div>\n      <div style=\"flex: 1;text-align: right\"><!-- 添加签到按钮 -->\n        <el-button size=\"medium\" @click=\"handleCheckIn()\" type=\"primary\">签到</el-button>\n        <el-button size=\"medium\" @click=\"drawer = true\" type=\"success\">充值</el-button>\n      </div>\n    </div>\n    <div class=\"card\" style=\"margin-top: 10px\">\n      <div style=\"color: #999999\">最近30条记录</div>\n      <el-table\n          :data=\"tableData\"\n          style=\"width: 100%\">\n        <el-table-column\n            prop=\"type\"\n            label=\"方式\"\n            width=\"200\">\n        </el-table-column>\n        <el-table-column\n            prop=\"time\"\n            label=\"获取日期\"\n            width=\"200\">\n        </el-table-column>\n        <el-table-column\n            prop=\"integral\"\n            label=\"积分变动\"\n            width=\"200\">\n        </el-table-column>\n      </el-table>\n    </div>\n    <el-drawer\n        title=\"充值\"\n        :visible.sync=\"drawer\"\n        :direction=\"direction\"\n        :before-close=\"handleClose\">\n      <el-card shadow=\"never\" style=\"padding: 20px;\">\n        <div class=\"card\">\n          <el-row :gutter=\"10\">\n            <el-col :span=\"6\" v-for=\"item in items\" :key=\"item\">\n              <div class=\"charge-item\" :class=\"{ 'active': current === item }\" @click=\"clickItem(item)\">\n                ￥{{ item }}\n              </div>\n            </el-col>\n          </el-row>\n\n          <div style=\"margin-top: 20px;\">\n            <el-button type=\"primary\" size=\"medium\" @click=\"handlePay()\" style=\"background-color: #f94b4b;\">支 付</el-button>\n          </div>\n        </div>\n      </el-card>\n    </el-drawer>\n  </div>\n</template>\n<script>\nexport default {\n  name: \"SingIn\",\n  data() {\n    return {\n      user: JSON.parse(localStorage.getItem('xm-user') || '{}'),\n      newUser: {},\n      integral: 10,\n      count: 0,\n      value: new Date(),\n      tableData: [],\n      drawer: false,\n      direction: 'rtl',\n      current: 6,\n      items: [6, 12, 30, 68, 98, 128, 328, 648]\n    };\n  },\n  mounted() {\n    this.load()\n  },\n  methods: {\n    clickItem(item) {\n      this.current = item\n    },\n    handleClose(done) {\n      this.$confirm('确认关闭？')\n          .then(_ => {\n            done();\n          })\n          .catch(_ => {\n          });\n    },\n    load() {\n      // 获取用户信息\n      this.$request.get('user/select/' + this.user.id).then(res => {\n        this.newUser = res.data || {}\n      })\n      // 获取签到记录(30条)\n      this.$request.get('/records/selectAll', {\n        params: {\n          userId: this.user.id\n        }\n      }).then(res => {\n        this.tableData = res.data || []\n      })\n      // 获取签到记录总数\n      this.$request.get('/signIn/selectCount/' + this.user.id).then(res => {\n        this.count = res.data || 0\n      })\n    },\n    handleCheckIn() {\n      this.$request.post('/signIn/add', {\n        userId: this.user.id,\n        integral: this.integral\n      }).then(res => {\n        if (res.code === '200') {\n          this.$message.success('签到成功')\n          this.$request.put('/user/updateIntegral2', {\n            id: this.user.id,\n            integral: this.integral\n          }).then(res => {\n            if (res.code === '200') {\n              this.$message.success('积分更新成功')\n              this.load()\n            } else {\n              this.$message.error('积分更新失败')\n            }\n          })\n        } else {\n          this.$message.error(res.msg)\n        }\n      })\n      this.load()\n    },\n    handlePay() {\n      this.$request.put('/user/updateIntegral', {\n        id: this.user.id,\n        integral: this.current\n      }).then(res => {\n        if (res.code === '200') {\n          this.$message.success('充值成功')\n          this.load()\n        } else {\n          this.$message.error('充值失败')\n        }\n      })\n\n    }\n  },\n}\n\n</script>\n\n<style scoped>\n.charge-item {\n  border: 1px solid #ccc;\n  padding: 20px 0;\n  margin-bottom: 10px;\n  text-align: center;\n  font-size: 20px;\n  color: #888;\n  border-radius: 5px;\n  cursor: pointer;\n}\n\n.active {\n  background-color: #f94b4b;\n  color: white;\n  border-color: #f94b4b;\n}\n</style>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./SignIn.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./SignIn.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./SignIn.vue?vue&type=template&id=b4aa3f0e&scoped=true\"\nimport script from \"./SignIn.vue?vue&type=script&lang=js\"\nexport * from \"./SignIn.vue?vue&type=script&lang=js\"\nimport style0 from \"./SignIn.vue?vue&type=style&index=0&id=b4aa3f0e&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"b4aa3f0e\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","staticStyle","_v","_s","newUser","integral","count","attrs","on","$event","handleCheckIn","drawer","tableData","direction","handleClose","_l","items","item","key","class","current","clickItem","handlePay","staticRenderFns","name","data","user","JSON","parse","localStorage","getItem","value","Date","mounted","load","methods","done","$confirm","then","_","catch","$request","get","id","res","params","userId","post","code","$message","success","put","error","msg","component"],"sourceRoot":""}