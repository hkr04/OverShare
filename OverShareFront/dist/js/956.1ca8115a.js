"use strict";(self["webpackChunkvue"]=self["webpackChunkvue"]||[]).push([[956],{74941:function(e,t,s){s.d(t,{A:function(){return c}});var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"card"},[e._l(e.tableData,(function(s){return e.total>0?t("div",{key:s.id,staticClass:"blog-box"},[t("div",{staticStyle:{flex:"1",width:"0",height:"100px"}},[t("a",{attrs:{href:"/front/blogDetail?blogId="+s.id,target:"_blank"}},[t("div",{staticClass:"blog-box-title"},[e._v(e._s(s.title)+" ")])]),t("div",{staticClass:"line1",staticStyle:{color:"#666","margin-bottom":"10px","font-size":"13px"}},[e._v(" "+e._s(s.descr)+" ")]),t("div",{staticStyle:{display:"flex"}},[t("div",{staticStyle:{flex:"1","font-size":"13px"}},[t("span",{staticStyle:{color:"#666","margin-right":"20px"}},[t("i",{staticClass:"el-icon-user",staticStyle:{"margin-right":"5px"}}),e._v(" "+e._s(s.userName)+" ")]),t("span",{staticStyle:{color:"#666","margin-right":"20px"}},[t("i",{staticClass:"el-icon-eye",staticStyle:{"margin-right":"5px"}}),e._v(" "+e._s(s.readCount)+" ")]),t("span",{staticStyle:{color:"#666"}},[t("i",{staticClass:"el-icon-like",staticStyle:{"margin-right":"5px"}}),e._v(" "+e._s(s.likesCount)+" ")]),e.showOpt?t("span",{staticStyle:{"margin-left":"40px",color:"red",cursor:"pointer"},on:{click:function(t){return e.del(s.id)}}},[t("i",{staticClass:"el-icon-delete"}),e._v("删除")]):e._e(),e.showOpt?t("span",{staticStyle:{"margin-left":"10px",color:"#2a60c9",cursor:"pointer"},on:{click:function(t){return e.editBlog(s.id)}}},[t("i",{staticClass:"el-icon-edit"}),e._v("编辑")]):e._e()]),t("div",{staticStyle:{width:"fit-content"}},e._l(JSON.parse(s.tags||[]),(function(s){return t("el-tag",{key:s.id,staticStyle:{"margin-right":"5px"},attrs:{type:"primary"}},[e._v(e._s(s)+" ")])})),1)])]),t("div",[t("div",{staticStyle:{width:"100%"}},[t("img",{staticStyle:{width:"100%",height:"80px","border-radius":"5px"},attrs:{src:s.cover,alt:""}})])])]):e._e()})),0===e.total?t("div",{staticStyle:{padding:"20px","text-align":"center","font-size":"16px",color:"#666"}},[e._v("暂无数据")]):e._e(),e.total?t("div",{staticClass:"pagination",staticStyle:{"margin-top":"10px"}},[t("el-pagination",{attrs:{background:"","current-page":e.pageNum,"page-sizes":[5,10,20],"page-size":e.pageSize,layout:"total, prev, pager, next",total:e.total},on:{"current-change":e.handleCurrentChange}})],1):e._e()],2)},r=[],a={name:"BlogList",props:{categoryName:null,type:null,showOpt:!1},watch:{categoryName(){this.loadBlog(1)}},data(){return{pageNum:1,pageSize:10,tableData:[],total:0,title:this.$route.query.title,userId:this.$route.query.userId}},mounted(){this.loadBlog(1)},methods:{editBlog(e){window.open("/front/newBlog?blogId="+e)},del(e){this.$confirm("您确定删除吗？","确认删除",{type:"warning"}).then((t=>{this.$request.delete("/blog/delete/"+e).then((e=>{"200"===e.code?(this.$message.success("操作成功"),this.loadBlog(1)):this.$message.error(e.msg)}))})).catch((()=>{}))},loadBlog(e){let t;switch(e&&(this.pageNum=e),this.type){case"user":t="/blog/selectUser";break;case"like":t="/blog/selectLike";break;case"collect":t="/blog/selectCollect";break;case"comment":t="/blog/selectComment";break;case"certification":t="/blog/selectCertification";break;default:t="/blog/selectPage"}this.$request.get(t,{params:{pageNum:this.pageNum,pageSize:this.pageSize,categoryName:"全部竞赛"===this.categoryName?null:this.categoryName,title:this.title,userId:this.userId}}).then((e=>{this.tableData=e.data?.list,this.total=e.data?.total}))},handleCurrentChange(e){this.loadBlog(e)}}},l=a,o=s(81656),n=(0,o.A)(l,i,r,!1,null,"76fafb92",null),c=n.exports},44956:function(e,t,s){s.r(t),s.d(t,{default:function(){return g}});var i=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticStyle:{height:"330px","background-color":"#2CBE56"}},[t("el-image",{staticStyle:{width:"100%",height:"100%"},attrs:{src:e.pageMsg.cover,fit:"cover"}})],1),t("div",{staticClass:"main-content",staticStyle:{"margin-left":"250px"}},[t("div",{staticClass:"card",staticStyle:{padding:"10px",display:"flex","justify-content":"space-between"}},[t("div",{staticStyle:{"margin-right":"15px"}},[e.user.avatar?t("img",{staticClass:"avatar",attrs:{src:e.user.avatar}}):e._e()]),t("div",{staticStyle:{display:"flex","flex-direction":"column","padding-top":"20px"}},[t("span",{staticStyle:{"font-weight":"bold","font-size":"36px"}},[e._v(e._s(e.user.name))]),t("div",{staticStyle:{"font-size":"26px"}},[e._v(" "+e._s(e.user.info)+" ")])]),t("div",{staticStyle:{"margin-left":"auto",display:"flex","align-items":"center"}},[e.isShowConcern?t("div",{staticStyle:{"margin-left":"10px"}},[e.isConcern?t("el-button",{attrs:{round:"",type:"success",size:"medium"},on:{click:e.concern}},[e._v("关注")]):t("el-button",{attrs:{round:"",type:"warning",size:"medium"},on:{click:e.cancelConcern}},[e._v("取消关注")])],1):e._e(),t("div",{staticStyle:{"margin-left":"10px"}},[t("el-statistic",{attrs:{"group-separator":",",value:e.concernCount,title:"关注人数"}})],1)])]),t("div",{staticClass:"card",staticStyle:{"margin-top":"10px"}},[t("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[t("el-tab-pane",{attrs:{label:"帖子",name:"帖子"}},[t("BlogList",{attrs:{type:"certification"}})],1)],1)],1)]),t("el-dialog",{attrs:{title:"新增会员档位",visible:e.dialogVisible,width:"60%","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("div",{staticStyle:{"font-weight":"bold","font-size":"24px","margin-bottom":"20px","text-align":"center"}},[e._v("编辑")]),t("el-form",{ref:"formRef",staticStyle:{"padding-right":"50px"},attrs:{model:e.form,"label-width":"100px",rules:e.rules}},[t("el-form-item",{attrs:{label:"标题",prop:"title"}},[t("el-input",{attrs:{placeholder:"标题"},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),t("el-form-item",{attrs:{label:"福利标题",prop:"welfareTitle"}},[t("el-input",{attrs:{placeholder:"福利标题"},model:{value:e.form.welfareTitle,callback:function(t){e.$set(e.form,"welfareTitle",t)},expression:"form.welfareTitle"}})],1),t("el-form-item",{attrs:{label:"简介",prop:"info"}},[t("div",{attrs:{id:"editor"}})]),t("el-form-item",{attrs:{label:"需求积分",prop:"integral"}},[t("el-input",{attrs:{placeholder:"需求积分",type:"number"},model:{value:e.form.integral,callback:function(t){e.$set(e.form,"integral",t)},expression:"form.integral"}})],1)],1),t("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[t("el-button",{staticStyle:{width:"200px"},attrs:{type:"primary"},on:{click:e.save}},[e._v("保 存")])],1)],1)],1)},r=[],a=(s(28743),s(5507)),l=s.n(a),o=s(81109),n=s(66848),c=s(74941),d={name:"HomePage",components:{BlogList:c.A},data(){return{userId:this.$route.query.userId,dbUser:JSON.parse(localStorage.getItem("xm-user")||"{}"),user:{},activeName:"帖子",concernCount:0,isShowConcern:!0,isConcern:!1,pageMsg:"",dialogVisible:!1,memberList:[],form:{},editor:null,rules:{title:[{required:!0,message:"请输入标题",trigger:"blur"}],welfareTitle:[{required:!0,message:"请输入福利标题",trigger:"blur"}],integral:[{required:!0,message:"请输入需求积分",trigger:"blur"}]},welfareTitle:"",memberCount:0}},mounted(){this.load(),this.selectConcernCount(),this.selectIsConcern()},methods:{isOpened(e){return this.$request.get("/myWelfare/selectByMidAndDbUid/"+e+"/"+this.userId+"/"+this.dbUser.id).then((e=>"200"==e.code?null===e.data?1:0:(this.$message.error(e.msg),null)))},opened(e){this.$confirm("是否确定开通此会员?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{this.$request.post("/myWelfare/add",{memberId:e,dbUserId:this.userId}).then((e=>{"200"==e.code?(this.$message.success("开通成功"),this.load()):this.$message.error(e.msg)}))})).catch((()=>{this.$message({type:"info",message:"已取消"})}))},save(){this.$refs.formRef.validate((e=>{e&&(this.form.info=this.editor.txt.html(),this.form.userId=this.userId,this.$request({url:this.form.id?"/member/update":"/member/add",method:this.form.id?"PUT":"POST",data:this.form}).then((e=>{"200"===e.code?(this.$message.success("保存成功"),this.dialogVisible=!1,this.load()):this.$message.error(e.msg)})))}))},handleAdd(){this.form={},this.setRichText(),this.fromVisible=!0,this.dialogVisible=!0},handleEdit(e){this.$request.get("/member/selectByMemberId/"+e).then((e=>{this.form=e.data||{},this.fromVisible=!0,this.dialogVisible=!0,this.setRichText(),setTimeout((()=>{this.editor.txt.html(this.form.info)}),0)}))},deleteMember(e){this.$confirm("您确定删除吗？","确认删除",{type:"warning"}).then((t=>{this.$request.delete("/member/delete/"+e).then((e=>{"200"===e.code?(this.$message.success("删除成功"),this.load()):this.$message.error(e.msg)}))})).catch((()=>{}))},setRichText(){this.$nextTick((()=>{this.editor=new(l())("#editor"),this.editor.highlight=o.A,this.editor.config.uploadImgServer=this.$baseUrl+"/files/editor/upload",this.editor.config.uploadFileName="file",this.editor.config.zIndex=0,this.editor.config.uploadImgHeaders={token:this.user.token},this.editor.config.uploadImgParams={type:"img"},this.editor.create()}))},load(){this.$request.get("/user/select/"+this.userId).then((e=>{this.user=e.data||{},this.userId-this.dbUser.id===0&&(this.isShowConcern=!1)})),this.$request.get("homePage/select/"+this.userId).then((e=>{this.pageMsg=e.data||""})),this.$request.get("/member/selectById/"+this.userId).then((e=>{if(this.memberList=e.data||[],0!==this.memberList.length){const e=this.memberList.map((e=>this.isOpened(e.id)));Promise.all(e).then((e=>{e.forEach(((e,t)=>{n["default"].set(this.memberList[t],"isOpened",1===e)}))}))}})),this.$request.get("/myWelfare/selectMemberCount/"+this.userId).then((e=>{this.memberCount=e.data||0}))},handleClose(e){this.$confirm("确认关闭？").then((t=>{e()})).catch((e=>{}))},selectConcernCount(){this.$request.get("concern/selectCount/"+this.userId).then((e=>{this.concernCount=e.data||0}))},selectIsConcern(){this.$request.get("concern/selectIsConcern/"+this.dbUser.id+"/"+this.userId).then((e=>{0!==e.data?this.isConcern=!1:this.isConcern=!0}))},cancelConcern(){this.$request.delete("/concern/delete/"+this.dbUser.id+"/"+this.userId).then((e=>{"200"===e.code?(this.$message.success("取消关注成功"),this.selectConcernCount(),this.selectIsConcern()):this.$message.error(e.msg)}))},concern(){this.$request.post("/concern/add",{userId:this.dbUser.id,creatorId:this.userId}).then((e=>{"200"===e.code?(this.$message.success("关注成功"),this.selectConcernCount(),this.selectIsConcern()):this.$message.error(e.msg)}))},editWelfare(e){this.$router.push("/front/ExitMemberWelfare?userId="+this.userId+"&memberId="+e)}}},h=d,m=s(81656),u=(0,m.A)(h,i,r,!1,null,"193963c8",null),g=u.exports}}]);
//# sourceMappingURL=956.1ca8115a.js.map