"use strict";(self["webpackChunkvue"]=self["webpackChunkvue"]||[]).push([[42],{69996:function(t,e,i){i.d(e,{A:function(){return c}});var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"card"},[e("h2",{staticStyle:{"margin-bottom":"20px"}},[t._v("评论 "+t._s(t.commentCount))]),e("div",[e("el-input",{attrs:{type:"textarea",placeholder:"请输入评论内容"},model:{value:t.commentContent,callback:function(e){t.commentContent=e},expression:"commentContent"}}),e("div",{staticStyle:{"text-align":"right","margin-top":"5px"}},[e("el-button",{attrs:{type:"primary"},on:{click:t.addComment}},[t._v("评 论")])],1)],1),e("div",t._l(t.commentList,(function(i){return e("div",{key:i.id,staticStyle:{display:"flex","grid-gap":"20px","margin-bottom":"10px"}},[e("img",{staticStyle:{width:"50px",height:"50px","border-radius":"50%"},attrs:{src:i.avatar,alt:""}}),e("div",{staticStyle:{flex:"1"}},[e("div",{staticStyle:{"margin-bottom":"10px"}},[e("div",{staticStyle:{color:"#666666","margin-bottom":"15px"}},[t._v(t._s(i.userName))]),e("div",{staticStyle:{color:"#555555","margin-bottom":"10px","font-size":"16px"}},[t._v(t._s(i.content))]),e("div",{staticStyle:{"margin-bottom":"10px"}},[e("span",{staticStyle:{"font-size":"12px",color:"#999999","margin-right":"10px"}},[t._v(t._s(i.time))]),e("span",{class:{"comment-activity":i.showReplyInput},staticStyle:{color:"#999999",cursor:"pointer"},on:{click:function(e){return t.handleShowReplyInput(i)}}},[e("i",{staticClass:"el-icon-s-comment"}),t._v(" 评论 ")]),i.userId===t.user.id?e("span",{staticStyle:{color:"#999999",cursor:"pointer","margin-left":"20px"},on:{click:function(e){return t.del(i.id)}}},[e("i",{staticClass:"el-icon-delete"}),t._v("删除")]):t._e()]),i.showReplyInput?e("div",[e("el-input",{attrs:{type:"textarea",placeholder:"请输入回复内容"},model:{value:i.replyContent,callback:function(e){t.$set(i,"replyContent",e)},expression:"item.replyContent"}}),e("div",{staticStyle:{"text-align":"right","margin-top":"5px"}},[e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.addReplyComment(i)}}},[t._v("回 复")])],1)],1):t._e()]),t._l(i.childrenCommentList,(function(i){return e("div",{key:i.id,staticStyle:{display:"flex","grid-gap":"20px","margin-bottom":"10px"}},[e("img",{staticStyle:{width:"50px",height:"50px","border-radius":"50%"},attrs:{src:i.avatar,alt:""}}),e("div",{staticStyle:{flex:"1"}},[e("div",{staticStyle:{color:"#666666","margin-bottom":"15px"}},[t._v(t._s(i.userName)+" "),i.userName!==i.replyName?e("span",[t._v("回复 "+t._s(i.replyName))]):t._e()]),e("div",{staticStyle:{color:"#555555","margin-bottom":"10px","font-size":"16px"}},[t._v(t._s(i.content))]),e("div",{staticStyle:{"margin-bottom":"10px"}},[e("span",{staticStyle:{"font-size":"12px",color:"#999999","margin-right":"10px"}},[t._v(t._s(i.time))]),e("span",{class:{"comment-activity":i.showReplyInput},staticStyle:{color:"#999999",cursor:"pointer"},on:{click:function(e){return t.handleShowReplyInput(i)}}},[e("i",{staticClass:"el-icon-s-comment"}),t._v(" 回复 ")]),i.userId===t.user.id?e("span",{staticStyle:{color:"#999999",cursor:"pointer","margin-left":"20px"},on:{click:function(e){return t.del(i.id)}}},[e("i",{staticClass:"el-icon-delete"}),t._v("删除")]):t._e()]),i.showReplyInput?e("div",[e("el-input",{attrs:{type:"textarea",placeholder:"请输入回复内容"},model:{value:i.replyContent,callback:function(e){t.$set(i,"replyContent",e)},expression:"sub.replyContent"}}),e("div",{staticStyle:{"text-align":"right","margin-top":"5px"}},[e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.addReplyComment(i)}}},[t._v("回 复")])],1)],1):t._e()])])}))],2)])})),0)])},o=[],n={name:"CommentComponent",props:{fid:null,module:null},data(){return{commentCount:0,commentContent:"",commentList:[],childrenCommentList:[],user:JSON.parse(localStorage.getItem("xm-user")||{})}},created(){this.loadComment()},methods:{del(t){this.$confirm("您确定删除吗？","确认删除",{type:"warning"}).then((e=>{this.$request.delete("/comment/delete/"+t).then((t=>{"200"===t.code?(this.$message.success("操作成功"),this.loadComment()):this.$message.error(t.msg)}))})).catch((()=>{}))},handleShowReplyInput(t){this.$set(t,"showReplyInput",!t.showReplyInput)},addReplyComment(t){void 0!==t.replyContent&&""!==t.replyContent&&null!==t.replyContent?this.$request.post("/comment/add",{pid:t.id,fid:this.fid,module:this.module,rootId:t.rootId,content:t.replyContent}).then((e=>{"200"===e.code&&this.$message.success("操作成功"),t.replyContent="",this.$request({url:"/msg/add",method:"POST",data:{userId:this.user.userId,title:"新的回复",content:"您的帖子有了新的回复"}}).then((t=>{"200"===t.code?(this.$message.success("提醒查阅信息发送成功"),this.fromVisible=!1):this.$message.error(t.msg)})),this.loadComment()})):this.$message.error("请输入回复内容")},loadComment(){this.$request.get("comment/selectForUser",{params:{fid:this.fid,module:this.module}}).then((t=>{this.commentList=t.data||[]})),this.$request.get("comment/selectCommentCount",{params:{fid:this.fid,module:this.module}}).then((t=>{this.commentCount=t.data||0}))},addComment(){void 0!==this.commentContent&&""!==this.commentContent&&null!==this.commentContent?this.$request.post("/comment/add",{fid:this.fid,content:this.commentContent,module:this.module}).then((t=>{"200"===t.code&&this.$message.success("操作成功"),this.commentContent="",this.loadComment()})):this.$message.error("请输入评论内容")}}},a=n,l=i(81656),r=(0,l.A)(a,s,o,!1,null,"776dc836",null),c=r.exports},83661:function(t,e,i){i.r(e),i.d(e,{default:function(){return d}});var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"main-content"},[e("div",{staticStyle:{display:"flex"}},[e("div",{staticClass:"left",staticStyle:{flex:"1"}},[e("div",{staticClass:"card",staticStyle:{padding:"20px 30px","margin-bottom":"10px"}},[e("div",{staticStyle:{"font-weight":"bold","font-size":"26px","margin-bottom":"20px"}},[t._v(" "+t._s(t.blog.title)+" ")]),e("div",{staticStyle:{color:"#999999","font-size":"12px","margin-bottom":"5px"}},[e("span",{staticStyle:{"margin-right":"20px"}},[e("i",{staticClass:"el-icon-user",staticStyle:{"margin-right":"3px"}}),t._v(t._s(t.blog.userName))]),e("span",{staticStyle:{"margin-right":"20px"}},[e("i",{staticClass:"el-icon-date",staticStyle:{"margin-right":"3px"}}),t._v(t._s(t.blog.date))]),e("span",{staticStyle:{"margin-right":"20px"}},[e("i",{staticClass:"el-icon-eye",staticStyle:{"margin-right":"3px"}}),t._v(t._s(t.blog.readCount))])]),e("div",{staticStyle:{"margin-bottom":"20px"}},t._l(t.tagsArr,(function(i){return e("el-tag",{key:i.id,staticStyle:{"margin-right":"3px"},attrs:{type:"primary",size:"mini"}},[t._v(" "+t._s(i)+" ")])})),1),null!=t.blog.contestId?e("div",{staticClass:"custom-card",staticStyle:{"margin-bottom":"10px"},on:{click:function(e){return t.goDetail(t.contest.id)}}},[e("div",{staticStyle:{display:"flex","grid-gap":"20px"}},[e("img",{staticStyle:{width:"50%","border-radius":"5px",height:"auto"},attrs:{src:t.contest.cover,alt:""}}),e("div",{staticStyle:{flex:"1"}},[e("div",{staticStyle:{"font-weight":"bold","font-size":"24px","margin-bottom":"20px","margin-top":"10px"}},[t._v(t._s(t.contest.name))]),e("div",{staticStyle:{color:"#666666","font-size":"13px","line-height":"22px","text-align":"justify","margin-bottom":"20px","margin-right":"20px"}},[t._v(" "+t._s(t.contest.descr)+" ")]),e("div",{staticStyle:{color:"#666666","margin-bottom":"10px"}},[e("i",{staticClass:"el-icon-date",staticStyle:{"margin-right":"5px"}}),e("span",{staticStyle:{"margin-right":"5px"}},[t._v("时间")]),e("span",[t._v(t._s(t.contest.start)+" - "+t._s(t.contest.end))])]),e("div",{staticStyle:{"margin-bottom":"10px",color:"#666666"}},[e("i",{staticClass:"el-icon-location-outline",staticStyle:{"margin-right":"5px"}}),e("span",{staticStyle:{"margin-right":"5px"}},[t._v("地址")]),"线上"===t.contest.form?e("span",[e("a",{staticStyle:{color:"#409EFF"},attrs:{href:t.contest.address,target:"_blank"}},[t._v(t._s(t.contest.address))]),e("el-tag",{staticStyle:{"margin-left":"10px"},attrs:{size:"mini"}},[t._v(t._s(t.contest.form))])],1):t._e(),"线下"===t.contest.form?e("span",[t._v(" "+t._s(t.contest.address)+" "),e("el-tag",{staticStyle:{"margin-left":"10px"},attrs:{size:"mini"}},[t._v(t._s(t.contest.form))])],1):t._e()])])])]):t._e(),e("div",{staticClass:"w-e-text",staticStyle:{width:"100%"}},[e("div",{domProps:{innerHTML:t._s(t.blog.content)}})])]),e("div",{staticClass:"card",staticStyle:{"text-align":"center","font-size":"20px",color:"#666","margin-bottom":"10px"}},[e("span",{class:{active:t.blog.userLike},staticStyle:{"margin-right":"20px",cursor:"pointer"},on:{click:t.setLikes}},[e("i",{staticClass:"el-icon-like"}),t._v(" "+t._s(t.blog.likesCount))]),e("span",{class:{active:t.blog.userCollect},staticStyle:{cursor:"pointer"},on:{click:t.setCollect}},[e("i",{staticClass:"el-icon-star-off"}),t._v(t._s(t.blog.collectCount))])]),e("Comment",{attrs:{fid:t.blogId,module:t.module}})],1),e("div",{staticClass:"right",staticStyle:{width:"260px","margin-left":"10px"}},[e("div",{staticClass:"card",staticStyle:{"margin-bottom":"10px"}},[e("div",{staticStyle:{display:"flex","grid-gap":"10px","align-items":"center","margin-bottom":"10px"}},[e("img",{staticStyle:{width:"50px",height:"50px","border-radius":"50%"},attrs:{src:t.blog.user?.avatar,alt:""},on:{click:function(e){return t.homePage(t.blog.user.id)}}}),e("div",{staticStyle:{flex:"1"}},[e("div",{staticStyle:{"font-weight":"bold","margin-bottom":"5px"}},[t._v(t._s(t.blog.user?.name))]),e("div",{staticClass:"line2",staticStyle:{color:"#666666","font-size":"12px"}},[t._v(t._s(t.blog.user?.info))])])]),e("div",{staticStyle:{display:"flex"}},[e("div",{staticStyle:{flex:"1","text-align":"center"}},[e("div",{staticStyle:{"margin-bottom":"5px"}},[t._v("文章")]),e("div",{staticStyle:{color:"#888"}},[t._v(t._s(t.blog.userBlogCount))])]),e("div",{staticStyle:{flex:"1","text-align":"center"}},[e("div",{staticStyle:{"margin-bottom":"5px"}},[t._v("点赞")]),e("div",{staticStyle:{color:"#888"}},[t._v(t._s(t.blog.userLikeCount))])]),e("div",{staticStyle:{flex:"1","text-align":"center"}},[e("div",{staticStyle:{"margin-bottom":"5px"}},[t._v("收藏")]),e("div",{staticStyle:{color:"#888"}},[t._v(t._s(t.blog.userCollectCount))])])])]),e("div",{staticClass:"card",staticStyle:{"margin-bottom":"10px"}},[e("div",{staticStyle:{"font-weight":"bold","font-size":"20px","padding-bottom":"10px","border-bottom":"1px solid #ddd","margin-bottom":"10px"}},[t._v(" 相关推荐 ")]),e("div",t._l(t.recommendList,(function(i){return e("div",{key:i.id,staticStyle:{"margin-bottom":"15px"}},[e("a",{attrs:{href:"/front/blogDetail?blogId="+i.id,target:"_blank"}},[e("div",{staticClass:"line2 reCommendTitle"},[t._v(t._s(i.title))])]),e("div",{staticStyle:{color:"#888"}},[e("span",[t._v("阅读")]),t._v(" "),e("span",[t._v(t._s(i.readCount))]),e("span",{staticStyle:{"margin-left":"10px"}},[t._v("点赞")]),t._v(" "),e("span",[t._v(t._s(i.likesCount))])])])})),0)])])])])},o=[],n=(i(28743),i(69996)),a={name:"BlogDetail",components:{Comment:n.A},data(){return{blogId:this.$route.query.blogId,blog:{},contest:{},tagsArr:[],recommendList:[],module:"帖子"}},created(){this.load(),this.$request.put("/blog/updateCount/"+this.blogId)},methods:{goDetail(t){window.open("/front/ActivityDetail?activityId="+t)},homePage(t){this.$router.push("/front/HomePage?userId="+t)},load(){this.$request.get("/blog/select/"+this.blogId).then((t=>{this.blog=t.data||{},this.tagsArr=JSON.parse(this.blog.tags||"[]"),this.blog.contestId&&this.loadContest(this.blog.contestId)})),this.$request.get("/blog/selectRecommend/"+this.blogId).then((t=>{this.recommendList=t.data||[]}))},loadContest(t){this.$request.get(`/activity/selectById/${t}`).then((t=>{this.contest=t.data}))},setLikes(){this.$request.post("/likes/set",{fid:this.blogId,module:"帖子"}).then((t=>{"200"===t.code&&this.$message.success("操作成功"),this.load()}))},setCollect(){this.$request.post("/collect/set/collect",{fid:this.blogId,module:"帖子"}).then((t=>{"200"===t.code&&this.$message.success("操作成功"),this.load()}))}}},l=a,r=i(81656),c=(0,r.A)(l,s,o,!1,null,null,null),d=c.exports}}]);
//# sourceMappingURL=42.a5b73c02.js.map