{"version":3,"file":"js/841.7106a51c.js","mappings":"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","sources":["webpack://vue/./src/views/front/SignIn.vue","webpack://vue/src/views/front/SignIn.vue","webpack://vue/./src/views/front/SignIn.vue?b760","webpack://vue/./src/views/front/SignIn.vue?ef06"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"main-content\",staticStyle:{\"width\":\"50%\"}},[_c('div',{staticClass:\"card\",staticStyle:{\"font-weight\":\"bold\",\"font-size\":\"28px\",\"display\":\"flex\"}},[_c('div',{staticStyle:{\"margin-right\":\"80px\"}},[_vm._v(\"现有积分：\"+_vm._s(_vm.newUser.integral))]),_c('div',[_vm._v(\"签到天数：\"+_vm._s(_vm.count))]),_c('div',{staticStyle:{\"flex\":\"1\",\"text-align\":\"right\"}},[_c('el-button',{attrs:{\"size\":\"medium\",\"type\":\"primary\"},on:{\"click\":function($event){return _vm.handleCheckIn()}}},[_vm._v(\"签到\")]),_c('el-button',{attrs:{\"size\":\"medium\",\"type\":\"success\"},on:{\"click\":function($event){_vm.drawer = true}}},[_vm._v(\"充值\")])],1)]),_c('div',{staticClass:\"card\",staticStyle:{\"margin-top\":\"10px\"}},[_c('div',{staticStyle:{\"color\":\"#999999\"}},[_vm._v(\"最近30条记录\")]),_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.tableData}},[_c('el-table-column',{attrs:{\"prop\":\"type\",\"label\":\"方式\",\"width\":\"200\"}}),_c('el-table-column',{attrs:{\"prop\":\"time\",\"label\":\"获取日期\",\"width\":\"200\"}}),_c('el-table-column',{attrs:{\"prop\":\"integral\",\"label\":\"积分变动\",\"width\":\"200\"}})],1)],1),_c('el-drawer',{attrs:{\"title\":\"充值\",\"visible\":_vm.drawer,\"direction\":_vm.direction,\"before-close\":_vm.handleClose},on:{\"update:visible\":function($event){_vm.drawer=$event}}},[_c('el-card',{staticStyle:{\"padding\":\"20px\"},attrs:{\"shadow\":\"never\"}},[_c('div',{staticClass:\"card\"},[_c('el-row',{attrs:{\"gutter\":10}},_vm._l((_vm.items),function(item){return _c('el-col',{key:item,attrs:{\"span\":6}},[_c('div',{staticClass:\"charge-item\",class:{ 'active': _vm.current === item },on:{\"click\":function($event){return _vm.clickItem(item)}}},[_vm._v(\" ￥\"+_vm._s(item)+\" \")])])}),1),_c('div',{staticStyle:{\"margin-top\":\"20px\"}},[_c('el-button',{staticStyle:{\"background-color\":\"#f94b4b\"},attrs:{\"type\":\"primary\",\"size\":\"medium\"},on:{\"click\":function($event){return _vm.handlePay()}}},[_vm._v(\"支 付\")])],1)],1)])],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"main-content\" style=\"width: 50%\">\r\n    <div class=\"card\" style=\"font-weight: bold;font-size: 28px;display: flex\">\r\n      <div style=\"margin-right: 80px\">现有积分：{{ newUser.integral }}</div>\r\n      <div>签到天数：{{ count }}</div>\r\n      <div style=\"flex: 1;text-align: right\"><!-- 添加签到按钮 -->\r\n        <el-button size=\"medium\" @click=\"handleCheckIn()\" type=\"primary\">签到</el-button>\r\n        <el-button size=\"medium\" @click=\"drawer = true\" type=\"success\">充值</el-button>\r\n      </div>\r\n    </div>\r\n    <div class=\"card\" style=\"margin-top: 10px\">\r\n      <div style=\"color: #999999\">最近30条记录</div>\r\n      <el-table\r\n          :data=\"tableData\"\r\n          style=\"width: 100%\">\r\n        <el-table-column\r\n            prop=\"type\"\r\n            label=\"方式\"\r\n            width=\"200\">\r\n        </el-table-column>\r\n        <el-table-column\r\n            prop=\"time\"\r\n            label=\"获取日期\"\r\n            width=\"200\">\r\n        </el-table-column>\r\n        <el-table-column\r\n            prop=\"integral\"\r\n            label=\"积分变动\"\r\n            width=\"200\">\r\n        </el-table-column>\r\n      </el-table>\r\n    </div>\r\n    <el-drawer\r\n        title=\"充值\"\r\n        :visible.sync=\"drawer\"\r\n        :direction=\"direction\"\r\n        :before-close=\"handleClose\">\r\n      <el-card shadow=\"never\" style=\"padding: 20px;\">\r\n        <div class=\"card\">\r\n          <el-row :gutter=\"10\">\r\n            <el-col :span=\"6\" v-for=\"item in items\" :key=\"item\">\r\n              <div class=\"charge-item\" :class=\"{ 'active': current === item }\" @click=\"clickItem(item)\">\r\n                ￥{{ item }}\r\n              </div>\r\n            </el-col>\r\n          </el-row>\r\n\r\n          <div style=\"margin-top: 20px;\">\r\n            <el-button type=\"primary\" size=\"medium\" @click=\"handlePay()\" style=\"background-color: #f94b4b;\">支 付</el-button>\r\n          </div>\r\n        </div>\r\n      </el-card>\r\n    </el-drawer>\r\n  </div>\r\n</template>\r\n<script>\r\nexport default {\r\n  name: \"SingIn\",\r\n  data() {\r\n    return {\r\n      user: JSON.parse(localStorage.getItem('xm-user') || '{}'),\r\n      newUser: {},\r\n      integral: 10,\r\n      count: 0,\r\n      value: new Date(),\r\n      tableData: [],\r\n      drawer: false,\r\n      direction: 'rtl',\r\n      current: 6,\r\n      items: [6, 12, 30, 68, 98, 128, 328, 648]\r\n    };\r\n  },\r\n  mounted() {\r\n    this.load()\r\n  },\r\n  methods: {\r\n    clickItem(item) {\r\n      this.current = item\r\n    },\r\n    handleClose(done) {\r\n      this.$confirm('确认关闭？')\r\n          .then(_ => {\r\n            done();\r\n          })\r\n          .catch(_ => {\r\n          });\r\n    },\r\n    load() {\r\n      // 获取用户信息\r\n      this.$request.get('user/select/' + this.user.id).then(res => {\r\n        this.newUser = res.data || {}\r\n      })\r\n      // 获取签到记录(30条)\r\n      this.$request.get('/records/selectAll', {\r\n        params: {\r\n          userId: this.user.id\r\n        }\r\n      }).then(res => {\r\n        this.tableData = res.data || []\r\n      })\r\n      // 获取签到记录总数\r\n      this.$request.get('/signIn/selectCount/' + this.user.id).then(res => {\r\n        this.count = res.data || 0\r\n      })\r\n    },\r\n    handleCheckIn() {\r\n      this.$request.post('/signIn/add', {\r\n        userId: this.user.id,\r\n        integral: this.integral\r\n      }).then(res => {\r\n        if (res.code === '200') {\r\n          this.$message.success('签到成功')\r\n          this.$request.put('/user/updateIntegral2', {\r\n            id: this.user.id,\r\n            integral: this.integral\r\n          }).then(res => {\r\n            if (res.code === '200') {\r\n              this.$message.success('积分更新成功')\r\n              this.load()\r\n            } else {\r\n              this.$message.error('积分更新失败')\r\n            }\r\n          })\r\n        } else {\r\n          this.$message.error(res.msg)\r\n        }\r\n      })\r\n      this.load()\r\n    },\r\n    handlePay() {\r\n      this.$request.put('/user/updateIntegral', {\r\n        id: this.user.id,\r\n        integral: this.current\r\n      }).then(res => {\r\n        if (res.code === '200') {\r\n          this.$message.success('充值成功')\r\n          this.load()\r\n        } else {\r\n          this.$message.error('充值失败')\r\n        }\r\n      })\r\n\r\n    }\r\n  },\r\n}\r\n\r\n</script>\r\n\r\n<style scoped>\r\n.charge-item {\r\n  border: 1px solid #ccc;\r\n  padding: 20px 0;\r\n  margin-bottom: 10px;\r\n  text-align: center;\r\n  font-size: 20px;\r\n  color: #888;\r\n  border-radius: 5px;\r\n  cursor: pointer;\r\n}\r\n\r\n.active {\r\n  background-color: #f94b4b;\r\n  color: white;\r\n  border-color: #f94b4b;\r\n}\r\n</style>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./SignIn.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./SignIn.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./SignIn.vue?vue&type=template&id=b4aa3f0e&scoped=true\"\nimport script from \"./SignIn.vue?vue&type=script&lang=js\"\nexport * from \"./SignIn.vue?vue&type=script&lang=js\"\nimport style0 from \"./SignIn.vue?vue&type=style&index=0&id=b4aa3f0e&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"b4aa3f0e\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","staticStyle","_v","_s","newUser","integral","count","attrs","on","$event","handleCheckIn","drawer","tableData","direction","handleClose","_l","items","item","key","class","current","clickItem","handlePay","staticRenderFns","name","data","user","JSON","parse","localStorage","getItem","value","Date","mounted","load","methods","done","$confirm","then","_","catch","$request","get","id","res","params","userId","post","code","$message","success","put","error","msg","component"],"sourceRoot":""}